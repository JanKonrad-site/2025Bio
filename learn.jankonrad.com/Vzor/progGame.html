<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cviƒçen√≠ Hello World - Drag & Drop Gamifikace</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  #codeBlocks, #dropZone {
    border: 2px dashed #ccc;
    min-height: 100px;
    padding: 10px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    user-select: none;
    margin-bottom: 20px;
  }
  .draggable {
    background: #f8f9fa;
    border: 1px solid #aaa;
    padding: 10px 15px;
    cursor: grab;
    border-radius: 5px;
    min-width: 90px;
    text-align: center;
    user-select: none;
  }
  .draggable.dragging {
    opacity: 0.5;
    cursor: grabbing;
  }
  #dropZone {
    flex-direction: column;
    min-height: 130px;
    background: #fff;
  }
  #dropZone p, #codeBlocks p {
    color: #999;
    font-style: italic;
    text-align: center;
    margin-top: 40px;
    width: 100%;
  }
  #resultCode {
    background: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
    padding: 15px;
    border-radius: 6px;
  }
  pre {
    background: #222;
    color: #eee;
    padding: 10px;
    border-radius: 4px;
    overflow-x: auto;
  }
  button {
    margin-top: 10px;
    background-color: #007bff;
    color: white;
    border: none;
    padding: 7px 15px;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<h2>üß† Cviƒçen√≠: Slo≈æ Hello World</h2>
<p>P≈ôet√°hni jednotliv√© bloky k√≥du ve spr√°vn√©m po≈ôad√≠, aby vznikl funkƒçn√≠ program v Pythonu, kter√Ω vyp√≠≈°e <strong>"Hello world"</strong>.</p>

<!-- Voln√© bloky -->
<div id="codeBlocks">
  <p>Voln√© bloky - p≈ôet√°hni z nich k√≥d do sestavy, nebo je vra≈• zpƒõt.</p>
  <div class="draggable" draggable="true" data-order="1">
    <strong>print(</strong><br><small>funkce pro v√Ωstup</small>
  </div>
  <div class="draggable" draggable="true" data-order="2">
    <strong>"Hello world"</strong><br><small>≈ôetƒõzec</small>
  </div>
  <div class="draggable" draggable="true" data-order="3">
    <strong>)</strong><br><small>uzav≈ôen√≠ funkce</small>
  </div>
</div>

<!-- Sestaven√≠ -->
<h4>Sestav sv≈Øj k√≥d</h4>
<div id="dropZone">
  <p>Sem p≈ôet√°hni bloky ve spr√°vn√©m po≈ôad√≠‚Ä¶</p>
</div>

<!-- V√Ωsledek -->
<div id="resultCode" class="d-none">
  <p><strong>‚úÖ V√Ωbornƒõ!</strong> Tady je v√Ωsledek:</p>
  <pre><code id="finalCode">print("Hello world")</code></pre>
  <button onclick="copyCode()">üìã Kop√≠rovat</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  let draggedItem = null;
  let completed = false;

  const draggables = document.querySelectorAll('.draggable');
  const codeBlocks = document.getElementById('codeBlocks');
  const dropZone = document.getElementById('dropZone');
  const result = document.getElementById('resultCode');
  const codeElement = document.getElementById('finalCode');

  // Inicialnƒõ schovej v√Ωsledek
  result.style.display = 'none';

  draggables.forEach(item => {
    item.addEventListener('dragstart', (e) => {
      draggedItem = item;
      item.classList.add('dragging');
      e.dataTransfer.setData('text/plain', '');
    });

    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      draggedItem = null;
    });
  });

  [codeBlocks, dropZone].forEach(zone => {
    zone.addEventListener('dragover', (e) => e.preventDefault());

    zone.addEventListener('drop', (e) => {
      e.preventDefault();
      if (!draggedItem) return;

      if (!zone.contains(draggedItem)) {
        zone.appendChild(draggedItem);
        checkOrder();
      }
    });
  });

  function checkOrder() {
    const items = Array.from(dropZone.querySelectorAll('.draggable'));
    const order = items.map(el => el.dataset.order);

    if (order.join(',') === '1,2,3') {
      completed = true;
      result.style.display = 'block'; // zobraz√≠me syntax
    } else if (!completed) {
      result.style.display = 'none'; // po≈ô√°d schovan√©, dokud nevy≈ôe≈°√≠
    }
  }

  window.copyCode = function () {
    navigator.clipboard.writeText(codeElement.textContent.trim())
      .then(() => alert("K√≥d byl zkop√≠rov√°n do schr√°nky!"));
  };
});
</script>

</body>
</html>
