<!-- 7.1.3 RastrovÃ¡ grafika â€” GIMP (ZmÄ›na pozadÃ­ â€” sleÄna; dle seÅ¡itu) -->
<section id="section7-1-3" class="container my-5">
  <h3 class="mb-4">7.1.3 GIMP â€” ZmÄ›na pozadÃ­ (sleÄna)</h3>

  <!-- Co se nauÄÃ­Å¡ -->
  <div class="container my-4 p-4 border rounded bg-light">
    <h3 class="mb-3">Co se nauÄÃ­Å¡?</h3>
    <p>Ne-destruktivnÄ› vymÄ›nit pozadÃ­ portrÃ©tu pomocÃ­ <em>masky vrstvy</em>, vÃ½bÄ›rÅ¯ a jejich doostÅ™enÃ­/zjemnÄ›nÃ­. VÅ¡e pÅ™esnÄ› podle seÅ¡itu, s vysvÄ›tlenÃ­m pojmÅ¯.</p>
    <ul class="list-group list-group-flush mb-3">
      <li class="list-group-item"><strong>Maska vrstvy</strong>: princip a ovlÃ¡dÃ¡nÃ­ (bÃ­lÃ¡/ÄernÃ¡/Å¡edÃ¡).</li>
      <li class="list-group-item"><strong>VÃ½bÄ›ry</strong>: Free Select / Paths, Quick Mask, Feather, Grow/Shrink, Feather radius.</li>
      <li class="list-group-item"><strong>ProlÃ­nÃ¡nÃ­</strong>: Å¡tÄ›tec na masce, gradient na masce, jemnÃ© okraje (vlasy).</li>
      <li class="list-group-item"><strong>Kompozice</strong>: poÅ™adÃ­ vrstev (Model nahoÅ™e, PozadÃ­ dole), zarovnÃ¡nÃ­ a mÄ›Å™Ã­tko.</li>
      <li class="list-group-item"><strong>Export</strong>: zachovÃ¡nÃ­ prÅ¯hlednosti (PNG) vs. slouÄenÃ­ (JPG).</li>
    </ul>
    <div class="alert alert-info" role="alert">
      <strong>Tip:</strong> Pracuj <em>na masce</em>, ne na obrÃ¡zku. Je to vratnÃ© â€“ obraz zÅ¯stÃ¡vÃ¡ nedotÄenÃ½.
    </div>
  </div>

  <!-- MateriÃ¡ly (uprav si cestu podle svÃ½ch souborÅ¯) -->
  <div class="d-flex flex-wrap gap-2 align-items-center mb-4">
    <a class="btn btn-primary" href="https://github.com/JanKonrad-site/GimpAssets.git" target="_blank" rel="noopener">â¬‡ï¸ Soubory ke cviÄenÃ­ (sleÄna + pozadÃ­)</a>
  </div>

  <!-- Akordeon kapitoly -->
  <div class="accordion" id="gimpGirlBG">

    <!-- 1) Teorie: Maska vrstvy + pracovnÃ­ nastavenÃ­ -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="h-girl-theory">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#c-girl-theory" aria-expanded="true" aria-controls="c-girl-theory">
          1) Teorie & nastavenÃ­ (Maska vrstvy, prÅ¯hlednost, pracovnÃ­ pohled)
        </button>
      </h2>
      <div id="c-girl-theory" class="accordion-collapse collapse show" aria-labelledby="h-girl-theory" data-bs-parent="#gimpGirlBG">
        <div class="accordion-body">
          <div class="alert alert-secondary mb-3">
            <strong>ğŸ§  Co je maska vrstvy?</strong><br>
            Maska Å™Ã­dÃ­ <em>viditelnost</em> vrstvy: <strong>bÃ­lÃ¡</strong> = viditelnÃ©, <strong>ÄernÃ¡</strong> = prÅ¯hlednÃ©, <strong>Å¡edÃ¡</strong> = poloprÅ¯hlednÃ©. Malujeme na masku (ne do obrÃ¡zku), takÅ¾e Ãºprava je <em>nedestruktivnÃ­</em>.
          </div>
          <ol class="mb-3">
            <li><kbd>File</kbd> â†’ <kbd>Open as Layers</kbd> â†’ otevÅ™i <strong>sleÄnu</strong> (vrstva <em>Model</em>) a pod ni <strong>novÃ© pozadÃ­</strong> (vrstva <em>Background</em>).</li>
            <li>Zkontroluj <em>Alpha Channel</em> u vrstvy Model (<kbd>Layers</kbd> â†’ pravÃ½ klik â†’ <em>Add Alpha Channel</em>, pokud chybÃ­).</li>
            <li><kbd>View</kbd> â†’ <em>Show All</em> (volitelnÄ›). PÅ™iprav si zoom (Ctrl+koleÄko), ruÄku (Space) a nÃ¡hled panelu Layers (vÄ›tÅ¡Ã­ thumbnails).</li>
          </ol>

          <div class="ratio ratio-16x9 mb-2">
            <img id="img-girl-theory" class="img-contained rounded border"
                 src="/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl01.png"
                 alt="Vrstvy: Model nad Background, pÅ™Ã­prava pracovnÃ­ho prostÅ™edÃ­">
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-outline-secondary" data-gallery-prev="img-girl-theory">â—€</button>
            <small class="text-muted">Model + Background</small>
            <button class="btn btn-sm btn-outline-secondary" data-gallery-next="img-girl-theory">â–¶</button>
          </div>
          <div data-gallery-src="img-girl-theory"
               data-images='[
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl01.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl02.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl03.png"
               ]'></div>
        </div>
      </div>
    </div>

    <!-- 2) VÃ½bÄ›r postavy (Free Select / Paths / Quick Mask) -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="h-girl-select">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c-girl-select" aria-expanded="false" aria-controls="c-girl-select">
          2) VÃ½bÄ›r postavy (Free Select / Paths / Quick Mask)
        </button>
      </h2>
      <div id="c-girl-select" class="accordion-collapse collapse" aria-labelledby="h-girl-select" data-bs-parent="#gimpGirlBG">
        <div class="accordion-body">
          <div class="alert alert-secondary mb-3">
            <strong>ğŸ§  JakÃ½ nÃ¡stroj vybrat?</strong><br>
            <em>Free Select</em> (laso) = rychlÃ© ruÄnÃ­ obtaÅ¾enÃ­. <em>Paths</em> (pera) = pÅ™esnÃ© kÅ™ivky (pak <em>Path â†’ Selection</em>). <em>Quick Mask</em> = â€maluj a oznaÄujâ€œ (toggler vpravo dole).
          </div>
          <ol class="mb-3">
            <li>Zvol jednu metodu a <strong>oznaÄ postavu</strong> (hrubÃ½ vÃ½bÄ›r). PÅ™ibliÅ¾ na vlasy a ruce kvÅ¯li detailÅ¯m.</li>
            <li><kbd>Select</kbd> â†’ <strong>Featherâ€¦</strong> (napÅ™. 1â€“2 px) pro jemnÃ½ okraj.</li>
            <li>Podle potÅ™eby <kbd>Select</kbd> â†’ <strong>Grow/Shrinkâ€¦</strong> (Â±1â€“2 px) k doladÄ›nÃ­ hran.</li>
          </ol>

          <div class="ratio ratio-16x9 mb-2">
            <img id="img-girl-select" class="img-contained rounded border"
                 src="/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl04.png"
                 alt="Tvorba a jemnÄ›nÃ­ vÃ½bÄ›ru postavy">
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-outline-secondary" data-gallery-prev="img-girl-select">â—€</button>
            <small class="text-muted">VÃ½bÄ›r & Feather</small>
            <button class="btn btn-sm btn-outline-secondary" data-gallery-next="img-girl-select">â–¶</button>
          </div>
          <div data-gallery-src="img-girl-select"
               data-images='[
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl04.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl05.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl06.png"
               ]'></div>
        </div>
      </div>
    </div>

    <!-- 3) PÅ™idÃ¡nÃ­ masky a skrytÃ­ pozadÃ­ -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="h-girl-mask">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c-girl-mask" aria-expanded="false" aria-controls="c-girl-mask">
          3) PÅ™idej masku k Modelu a skryj pÅ¯vodnÃ­ pozadÃ­
        </button>
      </h2>
      <div id="c-girl-mask" class="accordion-collapse collapse" aria-labelledby="h-girl-mask" data-bs-parent="#gimpGirlBG">
        <div class="accordion-body">
          <div class="alert alert-secondary mb-3">
            <strong>ğŸ§  BÃ­lÃ¡/ÄernÃ¡ na masce?</strong><br>
            BÃ­lÃ¡ = vÅ¡e z vrstvy je vidÄ›t. ÄŒernÃ¡ = vrstvu skrÃ½vÃ¡. KdyÅ¾ mÃ¡Å¡ <em>vÃ½bÄ›r postavy</em>, pouÅ¾ij <em>Masku z vÃ½bÄ›ru</em> â†’ postava bude vidÄ›t, pÅ¯vodnÃ­ pozadÃ­ skrytÃ©.
          </div>
          <ol class="mb-3">
            <li>S aktivnÃ­m vÃ½bÄ›rem postavy: v panelu <strong>Layers</strong> na vrstvÄ› <em>Model</em> â†’ pravÃ½ klik â†’ <strong>Add Layer Maskâ€¦</strong> â†’ <em>Initialize to: Selection</em> â†’ <strong>Add</strong>.</li>
            <li>VÃ½bÄ›r zruÅ¡ (<kbd>Select</kbd> â†’ <em>None</em>). Ujisti se, Å¾e je aktivnÃ­ <em>maska</em> (zelenÃ½ rÃ¡meÄek na miniatuÅ™e masky).</li>
            <li>Å tÄ›tcem (<em>Paintbrush</em>) doladÌŒ okraje: <strong>Äernou</strong> skryjeÅ¡ zbytky pÅ¯vodnÃ­ho pozadÃ­, <strong>bÃ­lou</strong> vrÃ¡tÃ­Å¡ ÄÃ¡sti postavy. KlÃ¡vesa <kbd>X</kbd> pÅ™epÃ­nÃ¡ FG/BG.</li>
          </ol>

          <div class="ratio ratio-16x9 mb-2">
            <img id="img-girl-mask" class="img-contained rounded border"
                 src="/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl07.png"
                 alt="Maska z vÃ½bÄ›ru a ruÄnÃ­ doladÄ›nÃ­ Å¡tÄ›tcem">
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-outline-secondary" data-gallery-prev="img-girl-mask">â—€</button>
            <small class="text-muted">Maska z vÃ½bÄ›ru</small>
            <button class="btn btn-sm btn-outline-secondary" data-gallery-next="img-girl-mask">â–¶</button>
          </div>
          <div data-gallery-src="img-girl-mask"
               data-images='[
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl07.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl08.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl09.png"
               ]'></div>
        </div>
      </div>
    </div>

    <!-- 4) JemnÃ© okraje (vlasy) a prolÃ­nÃ¡nÃ­ s novÃ½m pozadÃ­m -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="h-girl-hair">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c-girl-hair" aria-expanded="false" aria-controls="c-girl-hair">
          4) Vlasy & jemnÃ© okraje: Å¡tÄ›tce + gradient na masce
        </button>
      </h2>
      <div id="c-girl-hair" class="accordion-collapse collapse" aria-labelledby="h-girl-hair" data-bs-parent="#gimpGirlBG">
        <div class="accordion-body">
          <div class="alert alert-secondary mb-3">
            <strong>ğŸ§  ProÄ gradient na masce?</strong><br>
            Gradient na masce umÃ­ udÄ›lat plynulÃ½ pÅ™echod mezi vrstvami. HodÃ­ se u rozmazanÃ©ho pozadÃ­, kouÅ™e, vlasÅ¯ apod.
          </div>
          <ol class="mb-3">
            <li>Na masce pouÅ¾ij <strong>mÄ›kkÃ½ Å¡tÄ›tec</strong> s niÅ¾Å¡Ã­ <em>Opacity</em> (20â€“50 %) pro postupnÃ© â€dobarvenÃ­â€œ detailÅ¯ vlasÅ¯.</li>
            <li>Pro pÅ™echody do pozadÃ­ pouÅ¾ij <strong>Gradient</strong> na masce: reÅ¾im <em>FG â†’ Transparent</em>, podle potÅ™eby <em>Reverse</em>, tvar <em>Linear</em> nebo <em>Radial</em>.</li>
            <li>VyzkouÅ¡ej rÅ¯znÃ© barvy pozadÃ­ (mÅ¯Å¾eÅ¡ pod <em>Background</em> doÄasnÄ› vloÅ¾it bÃ­lou/Äernou vrstvu a ovÄ›Å™it halo.</li>
          </ol>

          <div class="ratio ratio-16x9 mb-2">
            <img id="img-girl-hair" class="img-contained rounded border"
                 src="/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl10.png"
                 alt="JemnÃ© okraje vlasÅ¯ â€” Å¡tÄ›tec a gradient na masce">
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-outline-secondary" data-gallery-prev="img-girl-hair">â—€</button>
            <small class="text-muted">Vlasy & pÅ™echod</small>
            <button class="btn btn-sm btn-outline-secondary" data-gallery-next="img-girl-hair">â–¶</button>
          </div>
          <div data-gallery-src="img-girl-hair"
               data-images='[
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl10.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl11.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl12.png"
               ]'></div>
        </div>
      </div>
    </div>

    <!-- 5) ZarovnÃ¡nÃ­ s novÃ½m pozadÃ­m a export -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="h-girl-export">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#c-girl-export" aria-expanded="false" aria-controls="c-girl-export">
          5) ZarovnÃ¡nÃ­, mÄ›Å™Ã­tko a export vÃ½sledku
        </button>
      </h2>
      <div id="c-girl-export" class="accordion-collapse collapse" aria-labelledby="h-girl-export" data-bs-parent="#gimpGirlBG">
        <div class="accordion-body">
          <ol class="mb-3">
            <li><strong>Move Tool</strong> a <strong>Scale Tool</strong>: uprav pozici a velikost <em>Background</em> i <em>Model</em>, aby scÃ©na pÅ¯sobila pÅ™irozenÄ›.</li>
            <li>VolitelnÄ› pÅ™idej <em>Gaussian Blur</em> na <em>Background</em> pro vÄ›tÅ¡Ã­ separaci (bokÃ©h efekt).</li>
            <li>UloÅ¾ projekt jako <strong>.XCF</strong> (vrstvy zachovÃ¡Å¡). Pro publikaci:
              <ul>
                <li><strong>PNG</strong>: zachovÃ¡ prÅ¯hlednost, kdyÅ¾ pozadÃ­ vypneÅ¡.</li>
                <li><strong>JPG</strong>: slouÄenÃ½ vÃ½sledek (bez prÅ¯hlednosti).</li>
              </ul>
            </li>
          </ol>

          <div class="ratio ratio-16x9 mb-2">
            <img id="img-girl-export" class="img-contained rounded border"
                 src="/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl12.png"
                 alt="FinÃ¡lnÃ­ kompozice a export">
          </div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-outline-secondary" data-gallery-prev="img-girl-export">â—€</button>
            <small class="text-muted">FinÃ¡le</small>
            <button class="btn btn-sm btn-outline-secondary" data-gallery-next="img-girl-export">â–¶</button>
          </div>
          <div data-gallery-src="img-girl-export"
               data-images='[
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl12.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl13.png",
                 "/learn.jankonrad.com/Assets/img/gimp/Lekce2/Slecna/Girl14.png"
               ]'></div>
        </div>
      </div>
    </div>

  </div><!-- /accordion -->

  <!-- ShrnutÃ­ -->
  <div class="container my-4 p-4 border rounded bg-light">
    <h3 class="mb-3">ShrnutÃ­</h3>
    <ul class="list-group list-group-flush mb-0">
      <li class="list-group-item">RozumÃ­Å¡ masce vrstvy (bÃ­lÃ¡/ÄernÃ¡/Å¡edÃ¡) a proÄ je nedestruktivnÃ­.</li>
      <li class="list-group-item">UmÃ­Å¡ vytvoÅ™it a zjemnit vÃ½bÄ›r (Feather, Grow/Shrink, Quick Mask).</li>
      <li class="list-group-item">AplikujeÅ¡ masku z vÃ½bÄ›ru a jemnÄ› doladÃ­Å¡ okraje Å¡tÄ›tcem.</li>
      <li class="list-group-item">PouÅ¾ijeÅ¡ gradient na masce pro plynulÃ© prolÃ­nÃ¡nÃ­ s novÃ½m pozadÃ­m.</li>
      <li class="list-group-item">ZarovnÃ¡Å¡ kompozici, uloÅ¾Ã­Å¡ .XCF a vyexportujeÅ¡ PNG/JPG.</li>
    </ul>
  </div>
</section>

<!-- Galerie helper (stejnÃ½ jako u pÅ™edchozÃ­ch lekcÃ­) -->
<style>
  .img-contained { width:100%; height:100%; object-fit:contain; object-position:center; }
</style>
<script>
(function(){
  function parseImages(el){ try { return JSON.parse(el.getAttribute('data-images')||'[]'); } catch(e){ return []; } }
  function setImg(id, src){ const img = document.getElementById(id); if(img){ img.src = src; } }
  function move(dir, btn){
    const id = btn.getAttribute(dir===-1?'data-gallery-prev':'data-gallery-next'); if(!id) return;
    const holder = document.querySelector('[data-gallery-src="'+id+'"]'); if(!holder) return;
    const list = parseImages(holder); if(!list.length) return;
    const img = document.getElementById(id);
    const current = img.src.split('/').pop();
    let idx = list.findIndex(x => x.split('/').pop() === current); if(idx===-1) idx = 0;
    const next = (idx + dir + list.length) % list.length;
    setImg(id, list[next]);
  }
  document.addEventListener('click', e => {
    if(e.target.matches('[data-gallery-prev]')) { e.preventDefault(); move(-1, e.target); }
    if(e.target.matches('[data-gallery-next]')) { e.preventDefault(); move(1, e.target); }
  });
})();
</script>
