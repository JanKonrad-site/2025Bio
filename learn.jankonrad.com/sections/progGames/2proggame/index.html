<<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vizuální programování – Lekce 2</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .sidebar, .taskbar {
      position: sticky;
      top: 1rem;
      max-height: 90vh;
      overflow-y: auto;
    }
    .category-group {
      display: block;
      width: 100%;
    }
    #blocks {
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
}
  </style>
</head>
<body>

<div class="container-fluid mt-4">
  <div class="row">
    <!-- Levý sloupec: Bloky -->
    <div class="col-auto sidebar bg-light">
      <h4 class="mb-3">Programovací bloky</h4>
      <div id="blocks">
        <div class="category-group">
          <h5 class="text-primary">Proměnné</h5>
          <div class="block bg-primary-subtle" draggable="true" data-type="var">Vytvoř proměnnou</div>
        </div>
        <div class="category-group">
          <h5 class="text-success">Vstup / Výstup</h5>
          <div class="block bg-success-subtle" draggable="true" data-type="input">Vstup uživatele</div>
          <div class="block bg-success-subtle" draggable="true" data-type="print">Vypiš do konzole</div>
        </div>
        <div class="category-group">
          <h5 class="text-warning">Řízení toku</h5>
          <div class="block bg-warning-subtle" draggable="true" data-type="if">Podmínka (if)</div>
          <div class="block bg-warning-subtle" draggable="true" data-type="loop">Cyklus (for)</div>
        </div>
        <div class="category-group">
          <h5 class="text-danger">Funkce</h5>
          <div class="block bg-danger-subtle" draggable="true" data-type="def">Vytvoř funkci</div>
          <div class="block bg-danger-subtle" draggable="true" data-type="call">Zavolej funkci</div>
        </div>
        <div class="category-group">
          <h5 class="text-secondary">Poznámky</h5>
          <div class="block bg-secondary-subtle" draggable="true" data-type="note">Poznámka</div>
        </div>
      </div>
    </div>

    <!-- Střední sloupec: Canvas + výstup -->
    <div class="col-md-6">
      <h2>Vizuální programování – Lekce 2</h2>
      <h5 class="mt-4">Sestavený skript</h5>
      <div id="canvas" class="border p-3 mb-3" style="min-height: 120px;">
        <p style="color:#999; text-align:center;">Sem přetáhni bloky...</p>
      </div>
      <h5>Generovaný Python kód</h5>
      <pre id="output" class="bg-light p-2 border rounded"></pre>
      <button class="btn btn-primary mb-2" id="runBtn">Spustit v online Python IDE</button>
      <iframe id="ideFrame" src="" style="width: 100%; height: 300px;"></iframe>
      <button class="btn btn-success mt-2" id="downloadBtn">Stáhnout jako .py</button>
    </div>

    <!-- Pravý sloupec: Úkoly -->
    <div class="col-md-3 taskbar">
      <div class="container my-4 p-4 border rounded bg-light">
        <h4 class="mb-3">Úkoly</h4>
        <h5 class="mb-2">🎯 Úkol 1: Ověření věku (krok za krokem)</h5>
        <ol class="list-group list-group-numbered mb-3">
          <li class="list-group-item">Vytvoř soubor <code>vek.py</code></li>
          <li class="list-group-item">Zeptej se uživatele na jméno:
            <pre><code>jmeno = input("Zadej své jméno: ")</code></pre></li>
          <li class="list-group-item">Zeptej se na věk a převeď na číslo:
            <pre><code>vek = int(input("Zadej svůj věk: "))</code></pre></li>
          <li class="list-group-item">Podmínka:
            <pre><code>if vek >= 18:
    print("Jsi plnoletý/á")
else:
    print("Ještě ti není 18")</code></pre></li>
          <li class="list-group-item">Zastav program:
            <pre><code>input("Stiskni Enter pro ukončení")</code></pre></li>
        </ol>

        <div class="bg-dark text-light p-3 rounded mt-4" style="max-width: 500px;">
          <p><strong>Simulace programu:</strong></p>
          <div>Zadej své jméno:</div>
          <input type="text" id="sim1Name" class="form-control mb-2" />
          <div>Zadej svůj věk:</div>
          <input type="number" id="sim1Age" class="form-control mb-2" />
          <button onclick="runSim1()" class="btn btn-sm btn-light">Spustit</button>
          <div class="mt-3" id="sim1Result" style="white-space: pre-line; color: white;"></div>
        </div>

        <hr class="my-4">

        <h5 class="mb-2">💻 Úkol 2: Textová kalkulačka</h5>
        <p>Napiš program, který funguje jako jednoduchá kalkulačka. Použij:</p>
        <ul>
          <li><code>input()</code> – pro vstupy</li>
          <li><code>float()</code> – pro čísla</li>
          <li><code>if / elif / else</code> – pro rozhodnutí</li>
        </ul>

        <div class="bg-dark text-light p-3 rounded mt-4" style="max-width: 600px;">
          <p><strong>Simulace kalkulačky:</strong></p>
          <div>Zadej první číslo:</div>
          <input type="number" id="sim2Num1" class="form-control mb-2" step="any" />
          <div>Zadej druhé číslo:</div>
          <input type="number" id="sim2Num2" class="form-control mb-2" step="any" />
          <div>Zadej operaci (+, -, *, /):</div>
          <input type="text" id="sim2Op" class="form-control mb-2" />
          <button onclick="runSim2()" class="btn btn-sm btn-light">Spustit</button>
          <div class="mt-3" id="sim2Result" style="white-space: pre-line; color: white;"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Hlavní JS modul -->
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/main.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/blocks.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/canvas.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/codeGenerator.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/helpers.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insert.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/tlačítka.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insertVarBlock.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insertPrintBlock.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insertInputBlock.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insertMoteBlock.js"></script>
<script src="/learn.jankonrad.com/sections/progGames/2proggame/js/insertIfBlock.js"></script>
<script>
  document.getElementById("runBtn").addEventListener("click", function () {
    const code = document.getElementById("output").innerText;
    const encodedCode = encodeURIComponent(code);
    const tutorUrl = `https://pythontutor.com/visualize.html#code=${encodedCode}&cumulative=false&heapPrimitives=false&mode=edit&origin=opt-frontend.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false`;
    window.open(tutorUrl, "_blank");
  });
  function runSim1() {
    const name = document.getElementById("sim1Name").value;
    const age = parseInt(document.getElementById("sim1Age").value);
    let msg = name + "\n";
    if (!isNaN(age)) {
      msg += age >= 18 ? "Jsi plnoletý/á" : "Ještě ti není 18";
    } else {
      msg += "Zadaný věk není platné číslo.";
    }
    document.getElementById("sim1Result").innerText = msg;
  }
  function runSim2() {
    const num1 = parseFloat(document.getElementById("sim2Num1").value);
    const num2 = parseFloat(document.getElementById("sim2Num2").value);
    const op = document.getElementById("sim2Op").value;
    let result = "";
    if (!isNaN(num1) && !isNaN(num2)) {
      switch (op) {
        case "+": result = num1 + num2; break;
        case "-": result = num1 - num2; break;
        case "*": result = num1 * num2; break;
        case "/": result = num2 !== 0 ? num1 / num2 : "Nelze dělit nulou"; break;
        default: result = "Neplatná operace";
      }
    } else {
      result = "Zadej platná čísla";
    }
    document.getElementById("sim2Result").innerText = result;
  }
</script>
</body>
</html>