<!-- =========================================================
     4.1.7–8 FUNKCE + PROJEKT: KALKULAČKA
     ========================================================= -->
<section id="section4-1-7-8" class="container my-5">
  <style>
    .tip{border-left:4px solid #0d6efd;background:#f8f9fa;padding:.75rem 1rem}
    .warn{border-left:4px solid #dc3545;background:#fff5f5;padding:.75rem 1rem}
    .ok{border-left:4px solid #198754;background:#f6fff8;padding:.75rem 1rem}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
    pre code{white-space:pre}
  </style>

  <h3 class="mb-3">4.1.7–8 Funkce krok za krokem → Projekt: Kalkulačka</h3>
  <p class="lead">
    Naučíš se vytvářet a používat funkce – od nejjednodušších po složený projekt kalkulačky.  
    Každý krok navazuje na předchozí a přidává nový prvek: parametry, návratové hodnoty, bezpečný vstup a práci s menu.
  </p>

  <div class="accordion" id="acc-funkce">

    <!-- 1) Definice a volání -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f1h">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#f1" aria-expanded="true">
          1️⃣ Definice a volání funkce
        </button>
      </h2>
      <div id="f1" class="accordion-collapse collapse show" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def pozdrav():
    print("ahoj")

pozdrav()

# Úkol: vytvoř funkci, která vypíše "Program běží" dvakrát
def info():
    print("Program běží")

info()
info()</code></pre>
          <div class="tip">Funkci nejdříve <b>definuješ</b> (<code>def ...</code>), pak ji <b>voláš</b> pomocí závorek <code>()</code>.</div>
        </div>
      </div>
    </div>

    <!-- 2) Parametry a argumenty -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f2h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f2">
          2️⃣ Parametry a argumenty
        </button>
      </h2>
      <div id="f2" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def soucet(a, b):
    print(a + b)

soucet(2, 3)

# Úkol: vytvoř funkci, která vypíše jméno a věk
def pozdrav(jmeno, vek):
    print(f"Ahoj: {jmeno}\nVěk: {vek}")

pozdrav("Jan", 30)</code></pre>
          <ul>
            <li><b>Parametry</b> jsou proměnné v definici funkce.</li>
            <li><b>Argumenty</b> jsou skutečné hodnoty při volání.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 3) Návratová hodnota -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f3h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f3">
          3️⃣ Návratová hodnota – <code>return</code>
        </button>
      </h2>
      <div id="f3" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def soucet(a, b):
    return a + b

priklad1 = soucet(5, 7)
priklad2 = soucet(10, 15)
vysledek = priklad1 + priklad2
print(vysledek)

# Úkol: funkce, která vrátí věk uživatele
vek = input("Zadejte váš věk: ")

def vrat_vek(vek):
    return vek

vek_uzivatele = vrat_vek(vek)
print(f"Věk: {vek_uzivatele}")</code></pre>
          <div class="ok"><code>print()</code> zobrazuje, <code>return</code> vrací výsledek – ten můžeš uložit, použít dál.</div>
        </div>
      </div>
    </div>

    <!-- 4) Funkce jako objekty -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f4h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f4">
          4️⃣ Funkce jako objekty (hodnoty)
        </button>
      </h2>
      <div id="f4" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def soucet(a,b): return a + b
def rozdil(a,b): return a - b

Soucet = soucet
Rozdil = rozdil

print(Soucet(10,5))
print(Rozdil(10,5))

# Úkol: ulož funkci rozdil pod jiný název a zavolej ji
NovaFunkce = rozdil
print(NovaFunkce(20,8))</code></pre>
          <div class="tip">Tento princip využijeme při tvorbě menu kalkulačky – funkce uložíme do „pole“ a voláme podle výběru uživatele.</div>
        </div>
      </div>
    </div>

    <!-- 5) Bezpečné načítání čísel -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f5h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f5">
          5️⃣ Bezpečné načítání čísla (try/except)
        </button>
      </h2>
      <div id="f5" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def nacti_cislo():
    while True:
        try:
            return int(input("Zadejte číslo: "))
        except ValueError:
            print("Tohle není celé číslo, zkuste to znovu.")

cislo = nacti_cislo()
print(f"Zadal jsi: {cislo}")</code></pre>
          <div class="ok">Funkce se sama opakuje, dokud uživatel nezadá platné číslo.</div>
        </div>
      </div>
    </div>

    <!-- 6) Načtení dvou čísel -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f6h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f6">
          6️⃣ Načtení dvou čísel pomocí <code>nacti_cislo()</code>
        </button>
      </h2>
      <div id="f6" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python">def nacti_dve_cisla():
    print("Načteme dvě čísla:")
    a = nacti_cislo()
    b = nacti_cislo()
    return a, b

x, y = nacti_dve_cisla()
print("Zadal jsi:", x, "a", y)
print("Součet je:", x + y)</code></pre>
          <div class="ok">Vracíme dvojici (<code>a,b</code>) a rozbalíme ji do dvou proměnných (<code>x, y</code>).</div>
        </div>
      </div>
    </div>

    <!-- 7) Projekt: Kalkulačka s funkcemi -->
    <div class="accordion-item">
      <h2 class="accordion-header" id="f7h">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#f7">
          7️⃣ Projekt: Kalkulačka s funkcemi a polem voleb
        </button>
      </h2>
      <div id="f7" class="accordion-collapse collapse" data-bs-parent="#acc-funkce">
        <div class="accordion-body">
<pre><code class="language-python"># Operace – všechny vrací číslo
def soucet(a,b): return a + b
def rozdil(a,b): return a - b
def soucin(a,b): return a * b
def podil(a,b):  return a / b

# Pole voleb (klíč, název, funkce)
VOLBY = [
    ("1", "Sčítání",  soucet),
    ("2", "Odčítání", rozdil),
    ("3", "Násobení", soucin),
    ("4", "Dělení",   podil),
    ("5", "Konec",    None)
]

# Převod na slovník = dispatcher
DISPATCH = {klic: (nazev, fn) for klic, nazev, fn in VOLBY}

def vypis_menu():
    print("====== Kalkulačka ======")
    for klic, nazev, _ in VOLBY:
        print(f"{klic}) {nazev}")

def kalkulacka():
    print("Kalkulačka je spuštěna.")
    while True:
        vypis_menu()
        volba = input("Zadejte možnost: ").strip()
        if volba not in DISPATCH:
            print("Neplatná volba, zkuste to znovu.")
            continue

        nazev, fn = DISPATCH[volba]

        if fn is None:
            print("Konec kalkulačky.")
            break

        a, b = nacti_dve_cisla()

        if fn is podil and b == 0:
            print("Chyba: nelze dělit nulou!")
            continue

        vysledek = fn(a, b)
        print(f"{nazev} {a} a {b} = {vysledek}")

def hlavni_menu():
    while True:
        print("===== Hlavní menu =====")
        print("1) Spustit kalkulačku")
        print("2) Konec programu")
        volba = input("Zadejte možnost: ").strip()
        if volba == "1":
            kalkulacka()
        elif volba == "2":
            print("Ukončuji program.")
            break
        else:
            print("Neplatná volba.")

if __name__ == "__main__":
    hlavni_menu()</code></pre>
          <div class="ok">Celý program teď používá všechny principy: funkce, parametry, návraty, bezpečné vstupy, menu i dispatcher.</div>
        </div>
      </div>
    </div>

  </div>

  <div class="card mt-4">
    <div class="card-body">
      <h5 class="card-title">🎯 Shrnutí a úkoly</h5>
      <ul>
        <li>Umíš vytvářet <b>funkce</b> s parametry a návratem.</li>
        <li>Rozumíš <b>try/except</b> a bezpečnému načítání vstupů.</li>
        <li>Dokážeš vytvořit program z <b>více funkčních částí</b>.</li>
      </ul>
      <ol>
        <li>Přidej funkci <code>mocnina(a,b)</code> a položku menu 6) Mocnina.</li>
        <li>Změň operace, aby používaly <code>float</code> místo <code>int</code>.</li>
        <li>Přidej paměť: ulož poslední výsledek a nabídni jeho znovupoužití.</li>
      </ol>
    </div>
  </div>
</section>
